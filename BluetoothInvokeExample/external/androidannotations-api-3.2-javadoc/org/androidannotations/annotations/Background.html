<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Sun Nov 09 14:28:42 CET 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>Background (AndroidAnnotations API 3.2 API)</title>
<meta name="date" content="2014-11-09">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Background (AndroidAnnotations API 3.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Background.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/androidannotations/annotations/App.html" title="annotation in org.androidannotations.annotations"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/androidannotations/annotations/Bean.html" title="annotation in org.androidannotations.annotations"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/androidannotations/annotations/Background.html" target="_top">Frames</a></li>
<li><a href="Background.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.androidannotations.annotations</div>
<h2 title="Annotation Type Background" class="title">Annotation Type Background</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>@Retention(value=CLASS)
@Target(value=METHOD)
public @interface <span class="strong">Background</span></pre>
<div class="block"><p>
 Should be used on method that must be run in a background thread.
 </p>
 <p>
 The annotated method MUST return void and MAY contain parameters.
 </p>
 <p>
 The generated code is based on <a href="../../../org/androidannotations/api/BackgroundExecutor.html" title="class in org.androidannotations.api"><code>BackgroundExecutor</code></a> methods.
 </p>
 
 <h2>Cancellation</h2>
 <p>
 Since 3.0, you're able to cancel a background task by calling
 <code>BackgroundExecutor.cancelAll("id")</code> where "id" matches the
 <a href="../../../org/androidannotations/annotations/Background.html#id()"><code>id()</code></a> value.
 
 </p>
 <blockquote>
 
 <b>Example</b> :
 
 <pre>
 &#064;EBean
 public class MyBean {
        private static final String TASK_ID = &quot;task1&quot;;
 
        &#064;Background(id = TASK_ID)
        void launchTask() {
                // ...
        }
 
        void stopTask() {
                BackgroundExecutor.cancelAll(TASK_ID);
        }
 
 }
 </pre>
 
 </blockquote>
 <p>
 <b>Note</b>: Cancellation may or may not be successful. If the task wasn't
 executed yet, it will be removed from the pool. But it could fail if task has
 already completed, has already been cancelled, or could not be cancelled for
 some other reason. See <code>Future.cancel(boolean)</code> for more information.
 </p>
 
 <h2>Execution flow</h2>
 <p>
 By default, all tasks will be put in a <code>ScheduledThreadPoolExecutor</code>
 with a core pool size of <code>2 * numberOfCpu</code>. Which means that
 background methods will be executed in <b>PARALLEL</b>. You can change this
 by calling <code>BackgroundExecutor.setExecutor(...)</code>.
 </p>
 <p>
 If you want execute ALL background methods SEQUENTIALLY, the best way is to
 change the executor of <a href="../../../org/androidannotations/api/BackgroundExecutor.html" title="class in org.androidannotations.api"><code>BackgroundExecutor</code></a> to a
 <code>ScheduledThreadPoolExecutor</code> with a core pool size of <code>1</code>.
 </p>
 <p>
 If you want execute some background methods SEQUENTIALLY, you should simply
 use <a href="../../../org/androidannotations/annotations/Background.html#serial()"><code>serial()</code></a> field. All task with the same serial key will be
 executed sequentially.
 </p>

 <blockquote>
 
 <b>Example 1</b> (all tasks executed sequentially) :
 
 <pre>
 &#064;EBean
 public class MyBean {
 
        static {
                BackgroundExecutor.setExecutor(Executors.newScheduledThreadPool(1));
        }
 
        private int i = 0;
 
        void launchTasks() {
                backgroundTask();
                backgroundTask();
                backgroundTask();
        }
 
        &#064;Background
        void backgroundTask() {
                Log.i(&quot;AA&quot;, &quot;i = &quot;, i++);
        }
 }
 </pre>
 
 <b>Example 2</b> (some tasks executed sequentially) :
 
 <pre>
 &#064;EBean
 public class MyBean {
 
        private int i = 0;
 
        void launchTasks() {
                backgroundTask();
                backgroundTask();
                backgroundTask();
        }
 
        &#064;Background(serial = &quot;sequence1&quot;)
        void backgroundTask() {
                Log.i(&quot;AA&quot;, &quot;i = &quot;, i++);
        }
 }
 </pre>
 
 </blockquote>
 
 
 <h2>Delay</h2>
 <p>
 Sometimes you may want to delay execution of a background method. To do so,
 you should use the <a href="../../../org/androidannotations/annotations/Background.html#delay()"><code>delay()</code></a> field.
 </p>
 <b>Example</b> :

 <blockquote>
 <pre>
 &#064;EBean
 public class MyBean {
 
        &#064;Background(delay = 2000)
        void backgroundTask() {
                // ...
        }
 }
 </pre>
 
 </blockquote></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../org/androidannotations/annotations/UiThread.html" title="annotation in org.androidannotations.annotations"><code>UiThread</code></a>, 
<a href="../../../org/androidannotations/api/BackgroundExecutor.html" title="class in org.androidannotations.api"><code>BackgroundExecutor</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== ANNOTATION TYPE OPTIONAL MEMBER SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_optional_element_summary">
<!--   -->
</a>
<h3>Optional Element Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Optional Element Summary table, listing optional elements, and an explanation">
<caption><span>Optional Elements</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Optional Element and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/androidannotations/annotations/Background.html#delay()">delay</a></strong></code>
<div class="block">Minimum delay, in milliseconds, before the background task is executed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/androidannotations/annotations/Background.html#id()">id</a></strong></code>
<div class="block">Identifier for task cancellation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/androidannotations/annotations/Background.html#serial()">serial</a></strong></code>
<div class="block">Serial execution group.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ ANNOTATION TYPE MEMBER DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="annotation_type_element_detail">
<!--   -->
</a>
<h3>Element Detail</h3>
<a name="id()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>id</h4>
<pre>public abstract&nbsp;java.lang.String&nbsp;id</pre>
<div class="block">Identifier for task cancellation.
 
 To cancel all tasks having a specified background id:
 
 <pre>
 boolean mayInterruptIfRunning = true;
 BackgroundExecutor.cancelAll(&quot;my_background_id&quot;, mayInterruptIfRunning);
 </pre></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the identifier for task cancellation</dd></dl>
<dl>
<dt>Default:</dt>
<dd>""</dd>
</dl>
</li>
</ul>
<a name="delay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delay</h4>
<pre>public abstract&nbsp;int&nbsp;delay</pre>
<div class="block">Minimum delay, in milliseconds, before the background task is executed.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the minimum delay before execution</dd></dl>
<dl>
<dt>Default:</dt>
<dd>0</dd>
</dl>
</li>
</ul>
<a name="serial()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>serial</h4>
<pre>public abstract&nbsp;java.lang.String&nbsp;serial</pre>
<div class="block">Serial execution group.
 
 All background tasks having the same <code>serial</code> will be executed
 sequentially.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the serial execution group</dd></dl>
<dl>
<dt>Default:</dt>
<dd>""</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Background.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/androidannotations/annotations/App.html" title="annotation in org.androidannotations.annotations"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/androidannotations/annotations/Bean.html" title="annotation in org.androidannotations.annotations"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/androidannotations/annotations/Background.html" target="_top">Frames</a></li>
<li><a href="Background.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Required&nbsp;|&nbsp;</li>
<li><a href="#annotation_type_optional_element_summary">Optional</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#annotation_type_element_detail">Element</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2010-2014. All Rights Reserved.</small></p>
</body>
</html>
